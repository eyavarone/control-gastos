<div class="ingreso-item" [ngClass]="getEstadoClass()">
  <div class="ingreso-content">
    <!-- InformaciÃ³n principal -->
    <div class="ingreso-info">
      <h4 class="ingreso-concepto">{{ ingreso.concepto }}</h4>
      <span class="ingreso-tipo-badge">{{ ingreso.tipo }}</span>
    </div>

    <!-- Montos -->
    <div class="ingreso-montos">
      <div class="monto-esperado">
        <span class="monto-label">Esperado:</span>
        <span class="monto-value">{{ formatCurrency(ingreso.montoEsperado) }}</span>
      </div>
      <div class="monto-recibido">
        <span class="monto-label">Recibido:</span>
        <span class="monto-value" [class.monto-recibido-completo]="isCompletamenteRecibido()">
          {{ formatCurrency(ingreso.montoRecibido) }}</span>
      </div>
    </div>

    <!-- Acciones -->
    <div class="ingreso-actions">
      <span class="estado-badge" [ngClass]="'estado-badge-' + getEstado().toLowerCase()">
        {{ getEstado() }}
      </span>
      <div class="action-buttons">
        <button class="btn-icon" title="Confirmar monto" *ngIf="!ingreso.estaConfirmado" (click)="onConfirmarClick()">
          âœ“
        </button>
        <button class="btn-icon" title="Registrar recepciÃ³n" (click)="onRecibirClick()">
          ğŸ’°
        </button>
        <button class="btn-icon" title="Editar" (click)="onEditarClick()">
          âœï¸
        </button>
        <button class="btn-icon btn-danger" title="Eliminar" (click)="onEliminarClick()">
          ğŸ—‘ï¸
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal confirmar monto -->
<app-monto-modal
  [isVisible]="showConfirmMontoModal"
  [title]="'Confirmar Monto del Ingreso'"
  [montoLabel]="'Monto Esperado'"
  [montoActual]="ingreso.montoEsperado"
  [montoEsperado]="ingreso.montoEsperado"
  [concepto]="ingreso.concepto"
  [confirmText]="'Confirmar Monto'"
  [isConfirmMode]="true"
  (confirmed)="onConfirmarMonto($event)"
  (cancelled)="onCancelarModal()"
></app-monto-modal>

<!-- Modal registrar recepciÃ³n -->
<app-monto-modal
  [isVisible]="showRecepcionModal"
  [title]="'Registrar RecepciÃ³n'"
  [montoLabel]="'Monto Recibido'"
  [montoActual]="ingreso.montoRecibido"
  [montoEsperado]="ingreso.montoEsperado"
  [concepto]="ingreso.concepto"
  [confirmText]="'Registrar RecepciÃ³n'"
  [isConfirmMode]="false"
  (confirmed)="onRegistrarRecepcion($event)"
  (cancelled)="onCancelarModal()"
></app-monto-modal>

<!-- Modal confirmar eliminaciÃ³n -->
<app-confirm-dialog
  [isVisible]="showDeleteConfirm"
  [title]="'Â¿Eliminar ingreso?'"
  [message]="'Â¿EstÃ¡s seguro de que deseas eliminar el ingreso ' + ingreso.concepto + '? Esta acciÃ³n no se puede deshacer.'"
  [confirmText]="'Eliminar'"
  [cancelText]="'Cancelar'"
  [confirmButtonClass]="'btn-danger'"
  (confirmed)="onConfirmarEliminar()"
  (cancelled)="onCancelarModal()">
</app-confirm-dialog>
